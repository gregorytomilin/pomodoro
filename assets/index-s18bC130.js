import{r as a,j as t,R as je}from"./react-BfF-YriY.js";import{c as Ce}from"./react-dom-BtsWHkds.js";import{L as I,B as we}from"./react-router-dom-CwyG1y9u.js";import{c as T}from"./effector-react-J5fJEP_j.js";import{p as m,h as z}from"./effector-wP0dD7uT.js";import{B as Z,H as W,Q as ke}from"./react-toastify-CI28Nflv.js";import{p as te}from"./effector-localstorage-CBAVYhXj.js";import{u as ye}from"./uid-CpW6Dhpp.js";import{i as _e}from"./echarts-ChS4Rbe6.js";import{d as Ne,e as E}from"./react-router-CTtfvnJ8.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-hZcSYCqI.js";import"./use-sync-external-store-CZSEbpyg.js";import"./clsx-B-dksMZM.js";import"./zrender-BAl-H0iw.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function e(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(i){if(i.ep)return;i.ep=!0;const c=e(i);fetch(i.href,c)}})();const Be="_header_1b9ob_1",Ae="_logo_1b9ob_19",be="_stat_1b9ob_27",R={header:Be,logo:Ae,stat:be},Se="/pomodoro/assets/logo-DnHTeJrR.png",Te="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACMSURBVHgB7dnBCYBQDMDQKE4izuHwziGuokPIByV5IwR6aDsx2LmvNy9sxzUx0IxcAZArAHIFQK4AyBUAuQIgVwDkCoBcAZBb+Lm3N8dGALkCIFcA5AqAXAGQaxf4+v9+tEYAuQIgVwDkCoBcAZArAHIFQK4AyBUAuQIgVwDkCoBcAZArAHIFQE4f4AHjkgq/+5aZiQAAAABJRU5ErkJggg==",Ee=s=>a.createElement("svg",{fill:"currentColor",viewBox:"0 0 1920 1920",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{d:"M1703.534 960c0-41.788-3.84-84.48-11.633-127.172l210.184-182.174-199.454-340.856-265.186 88.433c-66.974-55.567-143.323-99.389-223.85-128.415L1158.932 0h-397.78L706.49 269.704c-81.43 29.138-156.423 72.282-223.962 128.414l-265.073-88.32L18 650.654l210.184 182.174C220.39 875.52 216.55 918.212 216.55 960s3.84 84.48 11.633 127.172L18 1269.346l199.454 340.856 265.186-88.433c66.974 55.567 143.322 99.389 223.85 128.415L761.152 1920h397.779l54.663-269.704c81.318-29.138 156.424-72.282 223.963-128.414l265.073 88.433 199.454-340.856-210.184-182.174c7.793-42.805 11.633-85.497 11.633-127.285m-743.492 395.294c-217.976 0-395.294-177.318-395.294-395.294 0-217.976 177.318-395.294 395.294-395.294 217.977 0 395.294 177.318 395.294 395.294 0 217.976-177.317 395.294-395.294 395.294",fillRule:"evenodd"})),Re=()=>t.jsxs("div",{className:R.header,children:[t.jsx("div",{children:t.jsx(I,{to:"/pomodoro/",children:t.jsx("img",{className:R.logo,src:Se,alt:"logo"})})}),t.jsxs("div",{className:"df gap10",children:[t.jsx(I,{to:"/pomodoro/sets",className:R.stat,children:t.jsx(Ee,{})}),t.jsxs(I,{to:"/pomodoro/stat",className:R.stat,children:[t.jsx("img",{src:Te,alt:""}),"статистика"]})]})]}),Le="_task_5ntdp_1",Me="_pomidoroQuantity_5ntdp_25",Ie="_inputChange_5ntdp_47",He="_saveButton_5ntdp_59",L={task:Le,pomidoroQuantity:Me,inputChange:Ie,saveButton:He},$e="data:image/svg+xml,%3csvg%20width='26'%20height='6'%20viewBox='0%200%2026%206'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='3'%20cy='3'%20r='3'%20fill='%23C4C4C4'/%3e%3ccircle%20cx='13'%20cy='3'%20r='3'%20fill='%23C4C4C4'/%3e%3ccircle%20cx='23'%20cy='3'%20r='3'%20fill='%23C4C4C4'/%3e%3c/svg%3e",Qe="_sets_fz3wp_1",De={sets:Qe},Pe="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_35_546)'%3e%3cpath%20d='M10.545%206.765L11.235%207.455L4.44%2014.25H3.75V13.56L10.545%206.765ZM13.245%202.25C13.0575%202.25%2012.8625%202.325%2012.72%202.4675L11.3475%203.84L14.16%206.6525L15.5325%205.28C15.825%204.9875%2015.825%204.515%2015.5325%204.2225L13.7775%202.4675C13.6275%202.3175%2013.44%202.25%2013.245%202.25ZM10.545%204.6425L2.25%2012.9375V15.75H5.0625L13.3575%207.455L10.545%204.6425Z'%20fill='%23A8B64F'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_35_546'%3e%3crect%20width='18'%20height='18'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Fe="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_35_537)'%3e%3cpath%20d='M9.75%205.25H8.25V8.25H5.25V9.75H8.25V12.75H9.75V9.75H12.75V8.25H9.75V5.25ZM9%201.5C4.8675%201.5%201.5%204.8675%201.5%209C1.5%2013.1325%204.8675%2016.5%209%2016.5C13.1325%2016.5%2016.5%2013.1325%2016.5%209C16.5%204.8675%2013.1325%201.5%209%201.5ZM9%2015C5.6925%2015%203%2012.3075%203%209C3%205.6925%205.6925%203%209%203C12.3075%203%2015%205.6925%2015%209C15%2012.3075%2012.3075%2015%209%2015Z'%20fill='%23A8B64F'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_35_537'%3e%3crect%20width='18'%20height='18'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Ve="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_35_540)'%3e%3cpath%20d='M9%201.5C4.8675%201.5%201.5%204.8675%201.5%209C1.5%2013.1325%204.8675%2016.5%209%2016.5C13.1325%2016.5%2016.5%2013.1325%2016.5%209C16.5%204.8675%2013.1325%201.5%209%201.5ZM9%2015C5.6925%2015%203%2012.3075%203%209C3%205.6925%205.6925%203%209%203C12.3075%203%2015%205.6925%2015%209C15%2012.3075%2012.3075%2015%209%2015Z'%20fill='%23A8B64F'/%3e%3cpath%20d='M5.25%208.25H8.25H9.75H12.75V9.75H9.75H8.25H5.25V8.25Z'%20fill='%23A8B64F'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_35_540'%3e%3crect%20width='18'%20height='18'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",Oe="data:image/svg+xml,%3csvg%20width='18'%20height='18'%20viewBox='0%200%2018%2018'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20clip-path='url(%23clip0_35_551)'%3e%3cpath%20d='M12%206.75V14.25H6V6.75H12ZM10.875%202.25H7.125L6.375%203H3.75V4.5H14.25V3H11.625L10.875%202.25ZM13.5%205.25H4.5V14.25C4.5%2015.075%205.175%2015.75%206%2015.75H12C12.825%2015.75%2013.5%2015.075%2013.5%2014.25V5.25Z'%20fill='%23A8B64F'/%3e%3c/g%3e%3cdefs%3e%3cclipPath%20id='clip0_35_551'%3e%3crect%20width='18'%20height='18'%20fill='white'/%3e%3c/clipPath%3e%3c/defs%3e%3c/svg%3e",b=60*25,se=60*3,Ze=60*6,re=m(),Q=m(),ie=m(),H=m(),$=m(),ne=m(),oe=m(),ae=m(),ce=m(),C=m(),le=m(),de=m(),_=m(),D=z([]).on(re,(s,r)=>[...s,r]).on(Q,(s,r)=>s.filter(e=>e.id!==r)).on(ie,(s,r)=>s.map(e=>e.id===r.id?(Z("Задача отредактирована",{position:"bottom-right",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:W}),{...e,task:r.task}):e)).on(H,(s,r)=>s.map(e=>e.id===r.id?{...e,taskTimeRemaining:r.secondsRemaining}:e)).on($,(s,r)=>s.map(e=>e.id===r.id?{...e,breakTimeRemaining:r.secondsRemaining}:e)).on(ne,(s,r)=>s.map(e=>e.id===r.id?{...e,pomidoroQuantity:e.pomidoroQuantity+=1}:e)).on(oe,(s,r)=>s.map(e=>e.id===r.id?e.pomidoroQuantity===1?(Z.error("Нельзя просто взять и сделать меньше одного помидорро!",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:W}),e):{...e,pomidoroQuantity:e.pomidoroQuantity-=1}:e)).on(ae,(s,r)=>s.map(e=>e.id===r.id?{...e,pomidoroQuantity:e.pomidoroQuantity-=1}:e)).on(ce,(s,r)=>s.map(e=>e.id===r.id?{...e,taskTimeRemaining:e.taskTimeRemaining+=60}:e)).on(C,(s,r)=>s.map(e=>e.id===r.id?{...e,isTaskStarted:r.isStarted}:e)).on(le,(s,r)=>s.map(e=>e.id===r?{...e,taskTimeRemaining:b}:e)).on(de,(s,r)=>s.map(e=>e.id===r?{...e,breakTimeRemaining:se}:e)).on(_,(s,r)=>s.map(e=>e.id===s[s.length-1].id?{...e,timerId:r}:e));te({store:D,key:"tasks"});const We=s=>{const{id:r,onClose:e,setEditMode:o}=s,i=a.useRef(null);return t.jsx("div",{className:De.sets,ref:i,children:t.jsxs("ul",{children:[t.jsxs("li",{onClick:()=>{ne({id:r})},children:[t.jsx("img",{src:Fe,alt:""}),"Добавить помидор"]}),t.jsxs("li",{onClick:()=>{oe({id:r})},children:[t.jsx("img",{src:Ve,alt:""}),"Убрать помидор"]}),t.jsxs("li",{onClick:()=>{o(),e()},children:[t.jsx("img",{src:Pe,alt:""}),"Редактировать задачу"]}),t.jsxs("li",{onClick:()=>{Q(r),e()},children:[t.jsx("img",{src:Oe,alt:""}),"Удалить задачу"]})]})})},Ue=({ref:s,handler:r})=>{const e=a.useCallback(o=>{s.current&&o.target instanceof Node&&!s.current.contains(o.target)&&r()},[r,s]);a.useEffect(()=>(document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}),[e])},Ge=s=>{const{task:r,id:e,pomidoroQuantity:o}=s,[i,c]=a.useState(!1),[u,h]=a.useState(!1),p=a.useRef(null),d=a.useRef(null);Ue({ref:d,handler:()=>{c(!1)}});const g=()=>{var l;p.current&&(ie({id:e,task:((l=p.current)==null?void 0:l.value)??""}),h(!1))};return t.jsxs("div",{className:L.task,ref:d,children:[t.jsxs("div",{className:"df ai-c gap10",children:[t.jsx("div",{className:L.pomidoroQuantity,children:o}),u?t.jsxs(t.Fragment,{children:[t.jsx("input",{type:"text",defaultValue:r,ref:p,className:L.inputChange}),t.jsx("button",{className:L.saveButton,onClick:()=>g(),children:"сохранить"})]}):r]}),t.jsx("button",{onClick:()=>c(!0),children:t.jsx("img",{src:$e,alt:""})}),i&&t.jsx(We,{id:e,onClose:()=>c(!1),setEditMode:()=>h(!0)})]})},S=(s,r)=>{const e=["понедельник","вторник","среда","четверг","пятница","суббота","воскресенье"],o=r??new Date;if(s)switch(s){case"dayNumber":return o.getDay()===0?7:o.getDay()}return e[o.getDay()===0?6:o.getDay()-1]},me=s=>{const r=s??new Date,e=r.getDate().toString().padStart(2,"0"),o=(r.getMonth()+1).toString().padStart(2,"0"),i=r.getFullYear();return`${e}.${o}.${i}`},K=s=>{const r=s.split(".");return new Date(`${r[1]}.${r[0]}.${r[2]}`)},P=s=>s?{hours:Math.floor(s/3600),min:Math.floor(s%3600/60)}:{hours:0,min:0},ze=()=>{const s=T(D),r=s.reduce((i,c)=>i+c.pomidoroQuantity,0),{hours:e,min:o}=P(r*b);return t.jsxs("div",{children:[s.length>0&&s.slice(0).reverse().map(i=>t.jsx(Ge,{id:i.id,task:i.task,timeSpent:i.timeSpent,pomidoroQuantity:i.pomidoroQuantity,taskTimeRemaining:i.taskTimeRemaining,breakTimeRemaining:i.breakTimeRemaining,isTaskStarted:i.isTaskStarted},i.id)),r>0&&t.jsxs("div",{style:{fontSize:"12px",color:"var(--grey500)"},children:[`${e?e+"ч.":""}`,`${o?o+"мин.":""}`]})]})},Ke=()=>t.jsxs("div",{className:"df fd-c",style:{color:"var(--text-color)"},children:[t.jsx("div",{className:"fs24 fw-b",children:"Ура! Теперь можно начать работать:"}),t.jsxs("ul",{className:"df fd-c gap10 faq",children:[t.jsxs("li",{className:"fs18",children:["Выберите категорию и напишите название текущей задачи"," "]}),t.jsx("li",{className:"fs18",children:"Запустите таймер («помидор»)"}),t.jsx("li",{className:"fs18",children:"Работайте пока «помидор» не прозвонит Сделайте короткий перерыв (3-5 минут)"}),t.jsx("li",{className:"fs18",children:"Продолжайте работать «помидор» за «помидором», пока задача не будут выполнена."}),t.jsx("li",{className:"fs18",children:"Каждые 4 «помидора» делайте длинный перерыв (15-30 минут)."})]})]}),Ye="_button_vko5c_1",qe="_red_vko5c_23",Xe="_green_vko5c_37",Je="_greyBorder_vko5c_55",et="_redBorder_vko5c_63",X={button:Ye,red:qe,green:Xe,greyBorder:Je,redBorder:et},U=s=>{const{style:r,onClick:e,children:o,disabled:i}=s;return t.jsx("button",{disabled:!!i,onClick:e,className:`${X.button} ${r?X[r]:""}`,children:o&&o})},Y=m(),ue=z("").on(Y,(s,r)=>r),tt="_input_19gpp_1",st={input:tt},rt=s=>{const[r,e]=T([ue,Y]),{placeholder:o}=s;return t.jsx("input",{type:"text",value:r,placeholder:o??"Текст",className:st.input,onChange:i=>e(i.currentTarget.value)})};var w=(s=>(s.Green="green",s.Red="red",s.GreyBorder="greyBorder",s.RedBorder="redBorder",s))(w||{});const it=()=>{const[s,r]=T([ue,Y]),e=()=>{if(r(""),s!==""){const o={id:ye(),task:s,pomidoroQuantity:1,taskTimeRemaining:b,isTaskStarted:!1,breakTimeRemaining:0};re(o)}};return t.jsxs("div",{className:"df gap20 fd-c",children:[t.jsx(rt,{placeholder:"Название задачи"}),t.jsx(U,{style:w.Green,onClick:e,children:"Добавить"})]})},nt="_timer_1kdxc_1",ot="_timerHeader_1kdxc_9",at="_timerBody_1kdxc_23",ct="_addMinutes_1kdxc_43",lt="_timerCounts_1kdxc_85",dt="_timerControls_1kdxc_93",y={timer:nt,timerHeader:ot,timerBody:at,addMinutes:ct,timerCounts:lt,timerControls:dt},N=s=>a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...s},a.createElement("path",{d:"M4 12H20M12 4V20",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),mt=()=>{const s=r=>String(r).padStart(2,"0");return r=>{const e=Math.floor(r/60),o=r%60;return`${s(e)}:${s(o)}`}},ut="/pomodoro/assets/notasks-1UaZawsQ.gif",ht="/pomodoro/assets/dzin-Bi7iuZBF.mp3",J=()=>{const s=new Audio;s.src=ht,s.autoplay=!0};m();var B=(s=>(s.workTime="workTime",s.pauseTime="pauseTime",s.pomidoroQ="pomidoroQ",s.stopsQ="stopsQ",s))(B||{});const A=m(),F=me(),he=z([]).on(A,(s,r)=>{var o;if(!s||s.length===0)s.push({date:F,[r.type]:r.value??1,dayNumber:S("dayNumber")});else if(((o=s.at(-1))==null?void 0:o.date)!==F)s.push({date:F,[r.type]:r.value??1,dayNumber:S("dayNumber")});else{const i=s[s.length-1][r.type];i?s[s.length-1][r.type]=i+(r.value??1):s[s.length-1][r.type]=1}return[...s]});te({store:he,key:"progress"});const pt=()=>{const s=T(D),r=mt(),[e,o]=a.useState(!1),[i,c]=a.useState(!1),[u,h]=a.useState("00:00"),[p,d]=a.useState(null),[g,l]=a.useState(0),n=s.at(-1);a.useEffect(()=>{h(r(((n==null?void 0:n.breakTimeRemaining)||(n==null?void 0:n.taskTimeRemaining))??0)),e&&n&&!n.isTaskStarted?C({id:n.id,isStarted:!0}):!e&&p&&clearInterval(p)},[n,n==null?void 0:n.isTaskStarted,p,e,r,u]),a.useEffect(()=>{n!=null&&n.timerId&&(o(!0),d(n.timerId),n.breakTimeRemaining&&c(!0)),h(r(((n==null?void 0:n.breakTimeRemaining)||(n==null?void 0:n.taskTimeRemaining))??0));const x=D.watch(k=>{const v=k.at(-1);(v==null?void 0:v.pomidoroQuantity)===0&&(Q(v.id),Z.info(`Задача ${v.task} успешно заверешена. Вы большой М-О-Л-О-Д-Е-Ц`,{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light",transition:W}),f()),k.length===0&&f(),!(v!=null&&v.timerId)&&p&&(clearInterval(p),d(null))});return()=>x()},[]);const f=()=>{o(!1),c(!1)};if(!n)return t.jsx("div",{className:"df jc-c ai-c",children:t.jsx("img",{src:ut,alt:""})});const j=()=>{if(h(r(n.taskTimeRemaining)),n.taskTimeRemaining===0){ae({id:n.id}),A({type:B.pomidoroQ}),J(),o(!1),C({id:n.id,isStarted:!1}),c(!0),l(x=>x===3?0:x+=1),$({id:n.id,secondsRemaining:g===2?Ze:se});return}H({id:n.id,secondsRemaining:n.taskTimeRemaining-=1}),A({type:B.workTime})},q=()=>{if(h(r(n.breakTimeRemaining)),n.breakTimeRemaining===0){J(),c(!1),o(!1),C({id:n.id,isStarted:!1}),H({id:n.id,secondsRemaining:b});return}$({id:n.id,secondsRemaining:n.breakTimeRemaining-=1}),A({type:B.pauseTime})},ge=x=>{const k=fe(x);d(k),_(k)},fe=x=>setInterval(()=>x(),1e3),xe=()=>{if(_(null),i){o(!1),c(!1),C({id:n.id,isStarted:!1}),H({id:n.id,secondsRemaining:b}),$({id:n.id,secondsRemaining:0});return}Q(n.id)},ve=()=>{_(null),i?de(n.id):le(n.id),o(!1),C({id:n.id,isStarted:!1}),A({type:B.stopsQ})};return t.jsxs("div",{className:y.timer,children:[t.jsxs("div",{className:y.timerHeader,style:e?i?{backgroundColor:"var(--green600)",color:"white!important"}:{backgroundColor:"var(--red500)",color:"white!important"}:{},children:[t.jsx("span",{style:{color:"inherit"},children:n==null?void 0:n.task}),t.jsx("span",{style:{color:"inherit"},children:i?"Перерыв":`Помидор ${n==null?void 0:n.pomidoroQuantity}`})]}),t.jsxs("div",{className:y.timerBody,children:[t.jsxs("div",{className:"df gap20 ai-c",children:[t.jsx("div",{className:y.timerCounts,style:e?i?{color:"var(--green600)"}:{color:"var(--red500)"}:{},children:u}),t.jsx("div",{className:"roundedButton",onClick:()=>ce({id:n.id}),children:t.jsx(N,{})})]}),t.jsxs("div",{className:`${y.timerControls}`,children:[t.jsx(U,{style:w.Green,onClick:()=>{e?_(null):ge(i?q:j),o(x=>!x)},children:e?"Пауза":n.isTaskStarted?"Продолжить":"Старт"}),t.jsx(U,{disabled:!e&&!n.isTaskStarted,style:n.isTaskStarted?e?w.RedBorder:w.Red:w.GreyBorder,onClick:()=>{n.isTaskStarted&&!e&&xe(),n.isTaskStarted&&e&&ve()},children:!e&&n.isTaskStarted?i?"Пропустить":"Сделано":"Стоп"})]})]})]})},gt="_taskPage_3zhap_1",ft="_tasksBlock_3zhap_11",xt="_timerBlock_3zhap_23",V={taskPage:gt,tasksBlock:ft,timerBlock:xt},vt=()=>t.jsxs("div",{className:`${V.taskPage} scaleIn`,children:[t.jsxs("div",{className:V.tasksBlock,children:[t.jsx(Ke,{}),t.jsx(it,{}),t.jsx(ze,{})]}),t.jsx("div",{className:V.timerBlock,children:t.jsx(pt,{})})]}),G=(s,r)=>{s=Math.abs(s)%100;const e=s%10;return s>10&&s<20?r[2]:e>1&&e<5?r[1]:e==1?r[0]:r[2]},jt=s=>{const{dayName:r,workTime:e}=s,{hours:o,min:i}=P(e);return t.jsxs("div",{className:"df fd-c f-g gap20 card",children:[t.jsx("span",{className:"fw-b fs24",children:r?r.toUpperCase():S().toUpperCase()}),t.jsx("span",{className:"fs18",children:e?`Вы работали над задачами в течение ${o} ${G(o,["час","часов","часов"])} ${i} ${G(i,["минуты","минут","минут"])}`:"нет данных"})]})},pe=s=>{const r=s.getDay(),e=r===0?-6:1-r,o=new Date(s);return o.setDate(o.getDate()+e),o},Ct=s=>{const r=pe(s),e=new Date(r);return e.setDate(e.getDate()+6),e},wt=(s,r)=>{for(let e=0;e<=6;e++){const o=new Date(s);o.setDate(o.getDate()+1*e),r.some(c=>K(c.date).getTime()===o.getTime())||r.push({date:me(o),dayNumber:S("dayNumber",o)})}return r.sort((e,o)=>e.dayNumber-o.dayNumber)},kt=(s,r)=>{const[e,o]=a.useState([]);return a.useEffect(()=>{const i=new Date;i.setHours(0,0,0,0),i.setDate(i.getDate()+7*r);const c=pe(i),u=Ct(i),h=s.filter(p=>{const d=K(p.date);return d>=c&&d<=u});o(wt(c,h))},[r,s]),e},yt=({chosenWeek:s,setSelectedDate:r})=>{const e=T(he),o=kt(e,typeof s=="number"?s:0),i=a.useRef(null);return a.useEffect(()=>{if(!i.current)return;i.current.style.height="450px";const c=o.map(l=>({value:l.workTime??0})),u=Math.max(...c.map(l=>l.value)),h=(()=>{switch(!0){case u<100:return 10;case u<1e3:return 1800;case u<7200:return 2500;default:return 3600}})(),p=Math.ceil(Math.max(...c.map(l=>l.value))/h)*h,d=_e(i.current),g={margin:0,tooltip:{},xAxis:{data:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"]},yAxis:{position:"right",interval:h,max:p,axisLabel:{formatter:function(l){const n=Math.floor(l/3600),f=l%3600,j=Math.floor(f/60);return n?`${n}ч ${j} мин`:j?`${j} мин`:`${f} сек`}}},series:[{name:"Отработано",type:"bar",data:c,color:"red",itemStyle:{color:"#EA8A79"},emphasis:{itemStyle:{color:"#DC3E22"}}}],responsive:!0};return window.addEventListener("resize",function(){d.resize()}),d.setOption(g),d.on("click",function(l){var n;(n=g==null?void 0:g.series[0])==null||n.data.forEach((f,j)=>{l.dataIndex===j?f.itemStyle={color:"#DC3E22"}:f.itemStyle={color:"#EA8A79"}}),r(o[l.dataIndex]),d.setOption(g)}),d.getZr().on("click",l=>{var n;l.target||(r(null),(n=g==null?void 0:g.series[0])==null||n.data.forEach(f=>{f.itemStyle={color:"#EA8A79"}}),d.setOption(g))}),()=>{d.dispose()}},[o]),t.jsx("div",{className:"df f-g card",ref:i})},_t="_statCard_bptg7_1",Nt="_orange_bptg7_37",Bt="_violet_bptg7_51",At="_blue_bptg7_65",ee={statCard:_t,orange:Nt,violet:Bt,blue:At},O=s=>{const{Img:r,title:e,info:o,style:i}=s;return t.jsxs("div",{className:`${ee.statCard} card ${i?ee[i]:""}`,style:{flex:1},children:[t.jsxs("div",{className:"df fd-c gap20",children:[t.jsx("span",{className:"fs24 fw-b",children:e}),t.jsx("span",{className:"fs64 fw-400",children:o})]}),t.jsx(r,{})]})},bt=({setChoosenWeek:s})=>t.jsxs("div",{className:"df jc-sb",children:[t.jsx("div",{className:"fs18",children:"Ваша активность"}),t.jsxs("select",{name:"",id:"",onChange:r=>s(Number(r.target.value)),children:[t.jsx("option",{value:"0",children:"Эта неделя"}),t.jsx("option",{value:"-1",children:"Прошлая"}),t.jsx("option",{value:"-2",children:"2 недели назад"})]})]}),St=s=>a.createElement("svg",{width:115,height:115,viewBox:"0 0 115 115",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("g",{clipPath:"url(#clip0_16_527)"},a.createElement("path",{d:"M111.881 66.9398C111.881 96.9041 87.5898 115 57.6255 115C27.6603 115 3.36914 90.7089 3.36914 60.7437C3.36914 30.7794 28.4192 12.3571 58.3836 12.3571C88.3488 12.3571 111.881 36.9746 111.881 66.9398Z",fill:"#DC3E22"}),a.createElement("path",{d:"M81.185 36.2439C78.5489 33.5598 74.284 31.0639 71.1081 30.3341C72.8534 28.7865 73.2046 28.7355 75.391 27.6522C80.9932 24.8793 89.2913 24.624 89.2913 24.624C89.2913 24.624 79.497 19.5621 72.3358 19.8797C70.5127 19.9599 68.5898 20.604 66.7346 21.5166C67.7807 20.0403 68.7719 18.5725 69.4056 17.4698C71.3442 14.0981 73.3822 9.85057 73.3822 9.85057C73.3822 9.85057 65.8733 10.2515 62.3903 14.42C61.0676 16.0036 60.0691 18.0155 59.3384 19.9029C58.0406 18.4121 56.6082 17.0845 55.1756 16.0481C48.0129 10.8645 36.5683 11.986 36.5683 11.986C36.5683 11.986 45.2138 16.8902 49.1036 21.7826C50.6224 23.6932 52.1638 24.5767 53.0852 26.7189C49.9003 26.0293 42.7142 26.265 39.1867 27.5729C30.1222 30.9348 26.2164 44.4617 26.2164 44.4617C26.2164 44.4617 35.0618 38.3648 47.0968 34.0876C49.743 33.1475 52.5406 32.8983 54.9789 32.9411C53.872 34.6654 52.6628 36.9045 51.7478 39.5446C49.5215 45.9724 52.4634 61.2701 52.4634 61.2701C52.4634 61.2701 58.9082 52.2234 61.5343 44.8951C62.8821 41.1335 63.2157 37.3568 63.2231 34.5698C65.6131 35.6302 68.4281 37.1793 70.5319 38.5193C81.3038 45.3826 86.4576 57.9127 86.4576 57.9127C86.4576 57.9127 87.9585 43.1422 81.185 36.2439Z",fill:"#899441"}),a.createElement("path",{d:"M58.9395 29.6396C58.9053 29.6396 58.8711 29.6388 58.8368 29.6379C56.7066 29.5826 55.0246 27.8121 55.0764 25.6835C55.0808 25.4993 55.2668 12.5386 48.067 6.90318C46.3877 5.58886 46.0911 3.16203 47.4054 1.48184C48.7206 -0.197465 51.1475 -0.49402 52.8268 0.821175C63.1229 8.87817 62.8158 25.1887 62.7982 25.8792C62.7429 27.9761 61.025 29.6396 58.9395 29.6396Z",fill:"#A8B64F"}),a.createElement("circle",{cx:41.5,cy:64.5,r:2.5,fill:"black"}),a.createElement("g",{filter:"url(#filter0_f_16_527)"},a.createElement("circle",{cx:29.5,cy:75.5,r:5.5,fill:"#EA8979"})),a.createElement("g",{filter:"url(#filter1_f_16_527)"},a.createElement("circle",{cx:85.5,cy:75.5,r:5.5,fill:"#EA8979"})),a.createElement("circle",{cx:73.5,cy:64.5,r:2.5,fill:"black"}),a.createElement("path",{d:"M46 78C50 82 64.5 83 68.5 78",stroke:"black"})),a.createElement("defs",null,a.createElement("filter",{id:"filter0_f_16_527",x:20,y:66,width:19,height:19,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feGaussianBlur",{stdDeviation:2,result:"effect1_foregroundBlur_16_527"})),a.createElement("filter",{id:"filter1_f_16_527",x:76,y:66,width:19,height:19,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feGaussianBlur",{stdDeviation:2,result:"effect1_foregroundBlur_16_527"})),a.createElement("clipPath",{id:"clip0_16_527"},a.createElement("rect",{width:115,height:115,fill:"white"})))),Tt="_tomatoCard_16b04_1",Et={tomatoCard:Tt},Rt=({tomatoQuantity:s})=>t.jsxs("div",{className:`${Et.tomatoCard} card`,style:{padding:0},children:[t.jsxs("div",{className:"df gap20 ai-c jc-c",style:{padding:"10px"},children:[t.jsx(St,{}),s&&t.jsxs("span",{className:"fs24",children:["х",s]})]}),s&&t.jsx("div",{className:"df jc-c ai-c",style:{background:"var(--red500)",color:"white",padding:"10px"},children:`${s}
          ${G(s,["помидор","помидора","помидоров"])}
        `})]}),Lt=s=>a.createElement("svg",{width:115,height:115,viewBox:"0 0 115 115",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{d:"M57.3158 111.632C87.3136 111.632 111.632 87.3136 111.632 57.3158C111.632 27.318 87.3136 3 57.3158 3C27.318 3 3 27.318 3 57.3158C3 87.3136 27.318 111.632 57.3158 111.632Z",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M21 20L95 94",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round"})),Mt=s=>a.createElement("svg",{width:115,height:115,viewBox:"0 0 115 115",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{d:"M57.3158 111.632C87.3136 111.632 111.632 87.3136 111.632 57.3158C111.632 27.318 87.3136 3 57.3158 3C27.318 3 3 27.318 3 57.3158C3 87.3136 27.318 111.632 57.3158 111.632Z",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M57.3154 30.1579V57.3158L70.8944 70.8947",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round"})),It=s=>a.createElement("svg",{width:115,height:115,viewBox:"0 0 115 115",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{d:"M57.3158 111.632C87.3136 111.632 111.632 87.3136 111.632 57.3158C111.632 27.318 87.3136 3 57.3158 3C27.318 3 3 27.318 3 57.3158C3 87.3136 27.318 111.632 57.3158 111.632Z",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M57.5 95C78.2107 95 95 78.2107 95 57.5C95 36.7893 78.2107 20 57.5 20C36.7893 20 20 36.7893 20 57.5C20 78.2107 36.7893 95 57.5 95Z",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round"}),a.createElement("path",{d:"M57.5 78C68.8218 78 78 68.8218 78 57.5C78 46.1782 68.8218 37 57.5 37C46.1782 37 37 46.1782 37 57.5C37 68.8218 46.1782 78 57.5 78Z",strokeWidth:5,strokeLinecap:"round",strokeLinejoin:"round"})),Ht=()=>{const[s,r]=a.useState(0),[e,o]=a.useState(null);return a.useEffect(()=>{o(null)},[s]),t.jsxs("div",{className:"scaleIn df fd-c gap20",children:[t.jsx(bt,{setChoosenWeek:r}),t.jsxs("div",{className:"df gap20",children:[t.jsxs("div",{className:"df fd-c gap20",style:{width:"25%"},children:[t.jsx(jt,{dayName:e!=null&&e.dayNumber?S("",K(e==null?void 0:e.date)):"",workTime:e==null?void 0:e.workTime}),t.jsx(Rt,{tomatoQuantity:e==null?void 0:e.pomidoroQ})]}),t.jsx(yt,{chosenWeek:s,setSelectedDate:i=>o(i)})]}),t.jsxs("div",{className:"df gap20",children:[t.jsx(O,{title:"Фокус",info:`${(((e==null?void 0:e.pauseTime)??0+((e==null?void 0:e.workTime)??0))/((e==null?void 0:e.workTime)??1)*100).toFixed(0)}%`,style:e!=null&&e.workTime?"orange":"",Img:It}),t.jsx(O,{title:"Время на паузе",info:`${e!=null&&e.pauseTime?`${P(e.pauseTime).hours}ч.${P(e.pauseTime).min}м.`:0}`,Img:Mt,style:e!=null&&e.workTime?"violet":""}),t.jsx(O,{title:"Остановки",info:`${(e==null?void 0:e.stopsQ)??0}`,Img:Lt,style:e!=null&&e.workTime?"blue":""})]})]})},$t=()=>t.jsxs("div",{children:["Упс...нет такой страницы ",t.jsx(I,{to:"/",children:"перейти на главную"})]}),M=s=>a.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s},a.createElement("path",{d:"M6 12L18 12",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"})),Qt=()=>t.jsx("div",{className:"scaleIn",style:{width:"100%",maxWidth:"800px",margin:"auto",border:"1px solid #d8d8d8",padding:"40px",borderRadius:"12px"},children:t.jsxs("div",{className:"df fd-c gap20",children:[t.jsxs("div",{className:"df jc-sb ai-c gap20",children:[t.jsx("span",{className:"fs24 fw-b",children:"Помидор"}),".",t.jsxs("div",{className:"df gap40",children:[t.jsx("div",{className:"roundedButton",children:t.jsx(M,{})}),t.jsx("div",{className:"roundedButton",children:t.jsx(N,{})})]})]}),t.jsxs("div",{className:"df jc-sb ai-c gap20",children:[t.jsx("span",{className:"fs24 fw-b",children:"Короткий перерыв"}),".",t.jsxs("div",{className:"df gap40",children:[t.jsx("div",{className:"roundedButton",children:t.jsx(M,{})}),t.jsx("div",{className:"roundedButton",children:t.jsx(N,{})})]})]}),t.jsxs("div",{className:"df jc-sb ai-c gap20",children:[t.jsx("span",{className:"fs24 fw-b",children:"Длинный перерыв"}),".",t.jsxs("div",{className:"df gap40",children:[t.jsx("div",{className:"roundedButton",children:t.jsx(M,{})}),t.jsx("div",{className:"roundedButton",children:t.jsx(N,{})})]})]}),t.jsxs("div",{className:"df jc-sb ai-c gap20",children:[t.jsx("span",{className:"fs24 fw-b",children:"Кнопка добавления времени"}),".",t.jsxs("div",{className:"df gap40",children:[t.jsx("div",{className:"roundedButton",children:t.jsx(M,{})}),t.jsx("div",{className:"roundedButton",children:t.jsx(N,{})})]})]})]})});function Dt(){return t.jsx(t.Fragment,{children:t.jsxs(we,{children:[t.jsx(Re,{}),t.jsx("div",{className:"content",children:t.jsxs(Ne,{children:[t.jsx(E,{path:"/pomodoro/",element:t.jsx(vt,{})}),t.jsx(E,{path:"/pomodoro/stat",element:t.jsx(Ht,{})}),t.jsx(E,{path:"/pomodoro/sets",element:t.jsx(Qt,{})}),t.jsx(E,{path:"*",element:t.jsx($t,{})})]})}),t.jsx(ke,{})]})})}Ce.createRoot(document.getElementById("root")).render(t.jsx(je.StrictMode,{children:t.jsx(Dt,{})}));
